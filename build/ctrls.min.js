!function(){Polymer({is:"input-ctrl",created:function(){},ready:function(){var t=this.$$("label"),i=this.$$("input"),e=this.$$("button");this.hasAttribute("label")?t.innerText=this.getAttribute("label"):t.remove(),this.hasAttribute("placeholder")&&i.setAttribute("placeholder",this.getAttribute("placeholder")),this.hasAttribute("name")&&i.setAttribute("name",this.getAttribute("name")),this.hasAttribute("value")&&i.setAttribute("value",this.getAttribute("value")),this.hasAttribute("btn")?e.innerText=this.getAttribute("btn"):e.remove()},factoryImpl:function(t){this.value=t},get value(){return this.$$("input").value},set value(t){this.$$("input").value=t}})}(),function(){Polymer({is:"list-ctrl",created:function(){},ready:function(){var t=this;this.input=this.$$("input"),this.list=this.$$(".list-container");var i=this.getAttribute("value")||"";if(this.type=this.getAttribute("type")||"list",this.separator=this.getAttribute("separator")||"|","pill"==this.type){this.input.size=1;var e=document.createElement("span");e.classList.add("input-span");var n=document.createTextNode("");e.appendChild(n),e.appendChild(this.input),this.list.appendChild(e),this.replaceChild(this.list,this.$$(".list-input"))}this.value=i,this.input.addEventListener("keyup",this.onInput.bind(this)),this.input.addEventListener("keydown",this.onInput2.bind(this)),this.input.addEventListener("blur",this.add.bind(this)),this.list.addEventListener("click",function(i){return i.target.classList.contains("close")?(i.target.parentNode.remove(),void i.preventDefault()):void("pill"==t.type&&(i.target.classList.contains("list-item")?(console.log("Editing"),t.edit(i)):t.input.focus()))})},factoryImpl:function(t){},onInput2:function(t){switch(t.keyCode){case 9:this.add()}},onInput:function(t){switch(t.keyCode){case 13:this.add();break;case 8:if("pill"==this.type&&0==this.input.previousSibling.textContent.length){var i=this.input.parentNode.previousSibling;i&&i.remove()}else if("pill"==this.type){var e=this.input.previousSibling;e.textContent=e.textContent.substr(0,e.textContent.length-1)}break;default:"pill"==this.type&&(this.input.previousSibling.textContent+=this.input.value,this.input.value="")}},add:function(t){if(val="string"==typeof t?t:"pill"==this.type?this.input.previousSibling.textContent:this.input.value,val.length){var i=document.createElement("span");i.classList.add("list-item"),i.innerText=val,i.insertAdjacentHTML("beforeend",'<span class="close">&times;</span>'),"pill"==this.type?this.list.insertBefore(i,this.input.parentNode):this.list.appendChild(i)}"pill"==this.type&&(this.input.previousSibling.textContent="",this.list.appendChild(this.input.parentNode),(!t||t&&"blur"!=t.type)&&this.input.focus()),this.input.value=""},remove:function(){},edit:function(t){if("pill"==this.type){var i=t.target.childNodes[0].textContent;this.list.replaceChild(this.input.parentNode,t.target),this.input.previousSibling.textContent=i,this.input.focus()}},get value(){var t=[];return[].forEach.call(this.list.querySelectorAll(".list-item"),function(i){t.push(i.innerText)}),t.join(this.separator)},set value(t){[].forEach.call(this.list.querySelectorAll(".list-item"),function(t){t.remove()}),t.split(this.separator).forEach(this.add.bind(this))}})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0LWN0cmwvY3RybC5qcyIsImxpc3QtY3RybC9jdHJsLmpzIl0sIm5hbWVzIjpbIlBvbHltZXIiLCJpcyIsImNyZWF0ZWQiLCJyZWFkeSIsImxhYmVsIiwidGhpcyIsIiQkIiwiaW5wdXQiLCJidXR0b24iLCJoYXNBdHRyaWJ1dGUiLCJpbm5lclRleHQiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmUiLCJzZXRBdHRyaWJ1dGUiLCJmYWN0b3J5SW1wbCIsInZhbCIsInZhbHVlIix7ImVuZCI6eyJmaWxlIjoiPyIsImNvbW1lbnRzX2JlZm9yZSI6W10sIm5sYiI6ZmFsc2UsImVuZHBvcyI6ODMzLCJlbmRjb2wiOjExLCJlbmRsaW5lIjozMCwicG9zIjo4MjgsImNvbCI6NiwibGluZSI6MzAsInZhbHVlIjoidmFsdWUiLCJ0eXBlIjoibmFtZSJ9LCJzdGFydCI6eyJmaWxlIjoiPyIsImNvbW1lbnRzX2JlZm9yZSI6W10sIm5sYiI6ZmFsc2UsImVuZHBvcyI6ODMzLCJlbmRjb2wiOjExLCJlbmRsaW5lIjozMCwicG9zIjo4MjgsImNvbCI6NiwibGluZSI6MzAsInZhbHVlIjoidmFsdWUiLCJ0eXBlIjoibmFtZSJ9LCJuYW1lIjoidmFsdWUifSwic2VsZiIsImxpc3QiLCJ2YWx1ZUF0dHIiLCJ0eXBlIiwic2VwYXJhdG9yIiwic2l6ZSIsImlucHV0U3BhbiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRleHQiLCJjcmVhdGVUZXh0Tm9kZSIsImFwcGVuZENoaWxkIiwicmVwbGFjZUNoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uSW5wdXQiLCJiaW5kIiwib25JbnB1dDIiLCJlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJwYXJlbnROb2RlIiwicHJldmVudERlZmF1bHQiLCJjb25zb2xlIiwibG9nIiwiZWRpdCIsImZvY3VzIiwia2V5Q29kZSIsInByZXZpb3VzU2libGluZyIsInRleHRDb250ZW50IiwibGVuZ3RoIiwicHJldiIsInN1YnN0ciIsIml0ZW0iLCJpbnNlcnRBZGphY2VudEhUTUwiLCJpbnNlcnRCZWZvcmUiLCJjaGlsZE5vZGVzIiwidmFscyIsImZvckVhY2giLCJjYWxsIiwicXVlcnlTZWxlY3RvckFsbCIsInB1c2giLCJqb2luIiwic3BsaXQiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0FBLFNBQ0FDLEdBQUEsYUFDQUMsUUFBQSxhQUNBQyxNQUFBLFdBQ0EsR0FBQUMsR0FBQUMsS0FBQUMsR0FBQSxTQUFBQyxFQUFBRixLQUFBQyxHQUFBLFNBQUFFLEVBQUFILEtBQUFDLEdBQUEsU0FDQUQsTUFBQUksYUFBQSxTQUNBTCxFQUFBTSxVQUFBTCxLQUFBTSxhQUFBLFNBRUFQLEVBQUFRLFNBRUFQLEtBQUFJLGFBQUEsZ0JBQ0FGLEVBQUFNLGFBQUEsY0FBQVIsS0FBQU0sYUFBQSxnQkFFQU4sS0FBQUksYUFBQSxTQUNBRixFQUFBTSxhQUFBLE9BQUFSLEtBQUFNLGFBQUEsU0FFQU4sS0FBQUksYUFBQSxVQUNBRixFQUFBTSxhQUFBLFFBQUFSLEtBQUFNLGFBQUEsVUFFQU4sS0FBQUksYUFBQSxPQUNBRCxFQUFBRSxVQUFBTCxLQUFBTSxhQUFBLE9BRUFILEVBQUFJLFVBR0FFLFlBQUEsU0FBQUMsR0FDQVYsS0FBQVcsTUFBQUQsR0FFQUUsR0FBQUQsU0FDQSxNQUFBWCxNQUFBQyxHQUFBLFNBQUFVLE9BRUFDLEdBQUFELE9BQUFELEdBQ0FWLEtBQUFDLEdBQUEsU0FBQVUsTUFBQUQsUUNqQ0EsV0FDQWYsU0FDQUMsR0FBQSxZQUNBQyxRQUFBLGFBR0FDLE1BQUEsV0FDQSxHQUFBZSxHQUFBYixJQUNBQSxNQUFBRSxNQUFBRixLQUFBQyxHQUFBLFNBQ0FELEtBQUFjLEtBQUFkLEtBQUFDLEdBQUEsa0JBRUEsSUFBQWMsR0FBQWYsS0FBQU0sYUFBQSxVQUFBLEVBT0EsSUFOQU4sS0FBQWdCLEtBQUFoQixLQUFBTSxhQUFBLFNBQUEsT0FDQU4sS0FBQWlCLFVBQUFqQixLQUFBTSxhQUFBLGNBQUEsSUFLQSxRQUFB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QUdBNUIsR0FBQUQsU0FDQSxHQUFBd0MsS0FJQSxVQUhBQyxRQUFBQyxLQUFBckQsS0FBQWMsS0FBQXdDLGlCQUFBLGNBQUEsU0FBQVAsR0FDQUksRUFBQUksS0FBQVIsRUFBQTFDLGFBRUE4QyxFQUFBSyxLQUFBeEQsS0FBQWlCLFlBRUFMLEdBQUFELE9BQUFELE1BQ0EwQyxRQUFBQyxLQUFBckQsS0FBQWMsS0FBQXdDLGlCQUFBLGNBQUEsU0FBQVAsR0FDQUEsRUFBQXhDLFdBRUFHLEVBQUErQyxNQUFBekQsS0FBQWlCLFdBQUFtQyxRQUFBcEQsS0FBQXVCLElBQUFPLEtBQUE5QiIsImZpbGUiOiJjdHJscy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtcclxuXHRQb2x5bWVyKHtcclxuXHRcdGlzOiBcImlucHV0LWN0cmxcIixcclxuXHRcdGNyZWF0ZWQ6ZnVuY3Rpb24oKXt9LFxyXG5cdFx0cmVhZHk6ZnVuY3Rpb24oKXtcclxuXHRcdFx0dmFyIGxhYmVsID0gdGhpcy4kJChcImxhYmVsXCIpLCBpbnB1dCA9IHRoaXMuJCQoXCJpbnB1dFwiKSwgYnV0dG9uID0gdGhpcy4kJChcImJ1dHRvblwiKTsgXHJcblx0XHRcdGlmKHRoaXMuaGFzQXR0cmlidXRlKFwibGFiZWxcIikpe1xyXG5cdFx0XHRcdGxhYmVsLmlubmVyVGV4dCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwibGFiZWxcIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bGFiZWwucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYodGhpcy5oYXNBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiKSl7XHJcblx0XHRcdFx0aW5wdXQuc2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIix0aGlzLmdldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZih0aGlzLmhhc0F0dHJpYnV0ZShcIm5hbWVcIikpe1xyXG5cdFx0XHRcdGlucHV0LnNldEF0dHJpYnV0ZShcIm5hbWVcIix0aGlzLmdldEF0dHJpYnV0ZShcIm5hbWVcIikpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKHRoaXMuaGFzQXR0cmlidXRlKFwidmFsdWVcIikpe1xyXG5cdFx0XHRcdGlucHV0LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsdGhpcy5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYodGhpcy5oYXNBdHRyaWJ1dGUoXCJidG5cIikpe1xyXG5cdFx0XHRcdGJ1dHRvbi5pbm5lclRleHQgPSB0aGlzLmdldEF0dHJpYnV0ZShcImJ0blwiKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRidXR0b24ucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRmYWN0b3J5SW1wbDpmdW5jdGlvbih2YWwpe1xyXG5cdFx0XHR0aGlzLnZhbHVlID0gdmFsO1xyXG5cdFx0fSxcclxuXHRcdGdldCB2YWx1ZSgpe1xyXG5cdFx0XHRyZXR1cm4gdGhpcy4kJChcImlucHV0XCIpLnZhbHVlO1xyXG5cdFx0fSxcclxuXHRcdHNldCB2YWx1ZSh2YWwpe1xyXG5cdFx0XHR0aGlzLiQkKFwiaW5wdXRcIikudmFsdWUgPSB2YWw7XHJcblx0XHR9XHJcblx0fSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XHJcblx0UG9seW1lcih7XHJcblx0XHRpczogXCJsaXN0LWN0cmxcIixcclxuXHRcdGNyZWF0ZWQ6ZnVuY3Rpb24oKXtcclxuXHRcdFx0XHJcblx0XHR9LFxyXG5cdFx0cmVhZHk6ZnVuY3Rpb24oKXtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHR0aGlzLmlucHV0IFx0PSB0aGlzLiQkKFwiaW5wdXRcIiksXHJcblx0XHRcdHRoaXMubGlzdCBcdD0gdGhpcy4kJChcIi5saXN0LWNvbnRhaW5lclwiKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0dmFyIHZhbHVlQXR0ciBcdFx0PSB0aGlzLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpIHx8IFwiXCI7XHJcblx0XHRcdFx0dGhpcy50eXBlIFx0XHQ9IHRoaXMuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSB8fCBcImxpc3RcIixcclxuXHRcdFx0XHR0aGlzLnNlcGFyYXRvclx0PSB0aGlzLmdldEF0dHJpYnV0ZShcInNlcGFyYXRvclwiKSB8fCBcInxcIjtcclxuXHRcdFx0XHJcblx0XHRcdC8vbGFiZWxBdHRyIFx0XHQ/IChsYWJlbC5pbm5lclRleHQgPSBsYWJlbEF0dHIpXHRcdFx0XHRcdFx0OiBsYWJlbC5yZW1vdmUoKTtcclxuXHRcdFx0Ly9wbGFjZWhvbGRlckF0dHIgPyBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLHBsYWNlaG9sZGVyQXR0cikgOiBmYWxzZTtcclxuXHRcdFx0Ly9idG5BdHRyIFx0XHQ/IChidXR0b24uaW5uZXJUZXh0ID0gYnRuQXR0cilcdFx0XHRcdFx0XHQ6IGZhbHNlO1xyXG5cdFx0XHRpZih0aGlzLnR5cGUgPT0gXCJwaWxsXCIpe1xyXG5cdFx0XHRcdHRoaXMuaW5wdXQuc2l6ZSA9IDE7XHJcblx0XHRcdFx0dmFyIGlucHV0U3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG5cdFx0XHRcdGlucHV0U3Bhbi5jbGFzc0xpc3QuYWRkKFwiaW5wdXQtc3BhblwiKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO1xyXG5cdFx0XHRcdGlucHV0U3Bhbi5hcHBlbmRDaGlsZCh0ZXh0KTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdGlucHV0U3Bhbi5hcHBlbmRDaGlsZCh0aGlzLmlucHV0KTtcclxuXHRcdFx0XHR0aGlzLmxpc3QuYXBwZW5kQ2hpbGQoaW5wdXRTcGFuKTtcclxuXHRcdFx0XHR0aGlzLnJlcGxhY2VDaGlsZCh0aGlzLmxpc3QsdGhpcy4kJChcIi5saXN0LWlucHV0XCIpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLnZhbHVlID0gdmFsdWVBdHRyO1x0XHJcblx0XHRcdHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsdGhpcy5vbklucHV0LmJpbmQodGhpcykpO1xyXG5cdFx0XHR0aGlzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsdGhpcy5vbklucHV0Mi5iaW5kKHRoaXMpKTtcclxuXHRcdFx0dGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLHRoaXMuYWRkLmJpbmQodGhpcykpO1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5saXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKGUpe1xyXG5cdFx0XHRcdGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImNsb3NlXCIpKXtcclxuXHRcdFx0XHRcdGUudGFyZ2V0LnBhcmVudE5vZGUucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHNlbGYudHlwZT09XCJwaWxsXCIpe1xyXG5cdFx0XHRcdFx0aWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGlzdC1pdGVtXCIpKXtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJFZGl0aW5nXCIpO1xyXG5cdFx0XHRcdFx0XHRzZWxmLmVkaXQoZSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRzZWxmLmlucHV0LmZvY3VzKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHRmYWN0b3J5SW1wbDpmdW5jdGlvbih2YWwpe1xyXG5cdFx0XHQvL3RoaXMudmFsdWUgPSB2YWw7XHJcblx0XHR9LFxyXG5cdFx0b25JbnB1dDI6ZnVuY3Rpb24oZSl7XHJcblx0XHRcdHN3aXRjaChlLmtleUNvZGUpe1xyXG5cdFx0XHRcdGNhc2UgOTpcclxuXHRcdFx0XHRcdHRoaXMuYWRkKCk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRvbklucHV0OmZ1bmN0aW9uKGUpe1xyXG5cdFx0XHRzd2l0Y2goZS5rZXlDb2RlKXtcclxuXHRcdFx0XHRjYXNlIDEzOlxyXG5cdFx0XHRcdFx0dGhpcy5hZGQoKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlIDg6XHJcblx0XHRcdFx0XHRpZih0aGlzLnR5cGUgPT0gXCJwaWxsXCIgJiYgdGhpcy5pbnB1dC5wcmV2aW91c1NpYmxpbmcudGV4dENvbnRlbnQubGVuZ3RoID09IDApe1xyXG5cdFx0XHRcdFx0XHR2YXIgcHJldiA9IHRoaXMuaW5wdXQucGFyZW50Tm9kZS5wcmV2aW91c1NpYmxpbmc7XHJcblx0XHRcdFx0XHRcdGlmKHByZXYpIHtcclxuXHRcdFx0XHRcdFx0XHRwcmV2LnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYodGhpcy50eXBlID09IFwicGlsbFwiKSB7XHJcblx0XHRcdFx0XHRcdHZhciB0ZXh0ID0gdGhpcy5pbnB1dC5wcmV2aW91c1NpYmxpbmc7XHJcblx0XHRcdFx0XHRcdHRleHQudGV4dENvbnRlbnQgPSB0ZXh0LnRleHRDb250ZW50LnN1YnN0cigwLHRleHQudGV4dENvbnRlbnQubGVuZ3RoLTEpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRpZih0aGlzLnR5cGUgPT0gXCJwaWxsXCIpe1xyXG5cdFx0XHRcdFx0XHR0aGlzLmlucHV0LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudCArPSB0aGlzLmlucHV0LnZhbHVlO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmlucHV0LnZhbHVlID0gXCJcIjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdGFkZDpmdW5jdGlvbihlKXtcclxuXHRcdFx0dmFsID0gKHR5cGVvZihlKT09XCJzdHJpbmdcIikgPyBlIDogKHRoaXMudHlwZT09XCJwaWxsXCIgPyB0aGlzLmlucHV0LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudCA6IHRoaXMuaW5wdXQudmFsdWUpO1xyXG5cdFx0XHRpZih2YWwubGVuZ3RoKXtcclxuXHRcdFx0XHR2YXIgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG5cdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LmFkZChcImxpc3QtaXRlbVwiKTtcclxuXHRcdFx0XHRpdGVtLmlubmVyVGV4dCA9IHZhbDtcclxuXHRcdFx0XHRpdGVtLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCc8c3BhbiBjbGFzcz1cImNsb3NlXCI+JnRpbWVzOzwvc3Bhbj4nKTtcclxuXHRcdFx0XHRpZih0aGlzLnR5cGUgPT0gXCJwaWxsXCIpe1xyXG5cdFx0XHRcdFx0dGhpcy5saXN0Lmluc2VydEJlZm9yZShpdGVtLHRoaXMuaW5wdXQucGFyZW50Tm9kZSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMubGlzdC5hcHBlbmRDaGlsZChpdGVtKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0aWYodGhpcy50eXBlID09IFwicGlsbFwiKXtcclxuXHRcdFx0XHR0aGlzLmlucHV0LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudCA9IFwiXCI7XHJcblx0XHRcdFx0dGhpcy5saXN0LmFwcGVuZENoaWxkKHRoaXMuaW5wdXQucGFyZW50Tm9kZSk7XHJcblx0XHRcdFx0aWYoIWUgfHwgKGUgJiYgZS50eXBlICE9IFwiYmx1clwiKSl7XHJcblx0XHRcdFx0XHR0aGlzLmlucHV0LmZvY3VzKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuaW5wdXQudmFsdWUgPSBcIlwiO1xyXG5cdFx0fSxcclxuXHRcdHJlbW92ZTpmdW5jdGlvbigpe1xyXG5cdFx0XHRcclxuXHRcdH0sXHJcblx0XHRlZGl0OmZ1bmN0aW9uKGUpe1xyXG5cdFx0XHRpZih0aGlzLnR5cGUgPT0gXCJwaWxsXCIpe1xyXG5cdFx0XHRcdHZhciB2YWwgPSBlLnRhcmdldC5jaGlsZE5vZGVzWzBdLnRleHRDb250ZW50O1xyXG5cdFx0XHRcdHRoaXMubGlzdC5yZXBsYWNlQ2hpbGQodGhpcy5pbnB1dC5wYXJlbnROb2RlLGUudGFyZ2V0KTtcclxuXHRcdFx0XHR0aGlzLmlucHV0LnByZXZpb3VzU2libGluZy50ZXh0Q29udGVudCA9IHZhbDtcclxuXHRcdFx0XHR0aGlzLmlucHV0LmZvY3VzKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRnZXQgdmFsdWUoKXtcclxuXHRcdFx0dmFyIHZhbHMgPSBbXTtcclxuXHRcdFx0W10uZm9yRWFjaC5jYWxsKHRoaXMubGlzdC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxpc3QtaXRlbVwiKSxmdW5jdGlvbihpdGVtKXtcclxuXHRcdFx0XHR2YWxzLnB1c2goaXRlbS5pbm5lclRleHQpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuIHZhbHMuam9pbih0aGlzLnNlcGFyYXRvcik7XHJcblx0XHR9LFxyXG5cdFx0c2V0IHZhbHVlKHZhbCl7XHJcblx0XHRcdFtdLmZvckVhY2guY2FsbCh0aGlzLmxpc3QucXVlcnlTZWxlY3RvckFsbChcIi5saXN0LWl0ZW1cIiksZnVuY3Rpb24oaXRlbSl7XHJcblx0XHRcdFx0aXRlbS5yZW1vdmUoKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHZhbC5zcGxpdCh0aGlzLnNlcGFyYXRvcikuZm9yRWFjaCh0aGlzLmFkZC5iaW5kKHRoaXMpKTtcclxuXHRcdH1cclxuXHR9KTtcclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=